---
subcategory: "Policy"
layout: "azurerm"
page_title: "Azure Resource Manager: azurerm_policy_virtual_machine_configuration_assignment"
description: |-
  Applies a Guest Configuration Policy to a Virtual Machine.
---


<!-- Please do not edit this file, it is generated. -->
# azurerm_policy_virtual_machine_configuration_assignment

Applies a Guest Configuration Policy to a Virtual Machine.

~> **NOTE:** You can create Guest Configuration Policies without defining a `azurerm_virtual_machine_extension` resource, however the policies will not be executed until a `azurerm_virtual_machine_extension` has been provisioned to the virtual machine.

## Example Usage

```python
import constructs as constructs
import cdktf as cdktf
# Provider bindings are generated by running cdktf get.
# See https://cdk.tf/provider-generation for more details.
import ...gen.providers.azurerm as azurerm
class MyConvertedCode(cdktf.TerraformStack):
    def __init__(self, scope, name):
        super().__init__(scope, name)
        azurerm_resource_group_example = azurerm.resource_group.ResourceGroup(self, "example",
            location="West Europe",
            name="example-gca"
        )
        azurerm_virtual_network_example =
        azurerm.virtual_network.VirtualNetwork(self, "example_1",
            address_space=["10.0.0.0/16"],
            location=cdktf.Token.as_string(azurerm_resource_group_example.location),
            name="example-vnet",
            resource_group_name=cdktf.Token.as_string(azurerm_resource_group_example.name)
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        azurerm_virtual_network_example.override_logical_id("example")
        azurerm_subnet_example = azurerm.subnet.Subnet(self, "example_2",
            address_prefixes=["10.0.2.0/24"],
            name="internal",
            resource_group_name=cdktf.Token.as_string(azurerm_resource_group_example.name),
            virtual_network_name=cdktf.Token.as_string(azurerm_virtual_network_example.name)
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        azurerm_subnet_example.override_logical_id("example")
        azurerm_network_interface_example =
        azurerm.network_interface.NetworkInterface(self, "example_3",
            ip_configuration=[NetworkInterfaceIpConfiguration(
                name="internal",
                private_ip_address_allocation="Dynamic",
                subnet_id=cdktf.Token.as_string(azurerm_subnet_example.id)
            )
            ],
            location=cdktf.Token.as_string(azurerm_resource_group_example.location),
            name="example-nic",
            resource_group_name=cdktf.Token.as_string(azurerm_resource_group_example.name)
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        azurerm_network_interface_example.override_logical_id("example")
        azurerm_windows_virtual_machine_example =
        azurerm.windows_virtual_machine.WindowsVirtualMachine(self, "example_4",
            admin_password="P@$w0rd1234!",
            admin_username="adminuser",
            identity=WindowsVirtualMachineIdentity(
                type="SystemAssigned"
            ),
            location=cdktf.Token.as_string(azurerm_resource_group_example.location),
            name="examplevm",
            network_interface_ids=[
                cdktf.Token.as_string(azurerm_network_interface_example.id)
            ],
            os_disk=WindowsVirtualMachineOsDisk(
                caching="ReadWrite",
                storage_account_type="Standard_LRS"
            ),
            resource_group_name=cdktf.Token.as_string(azurerm_resource_group_example.name),
            size="Standard_F2",
            source_image_reference=WindowsVirtualMachineSourceImageReference(
                offer="WindowsServer",
                publisher="MicrosoftWindowsServer",
                sku="2019-Datacenter",
                version="latest"
            )
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        azurerm_windows_virtual_machine_example.override_logical_id("example")
        azurerm_policy_virtual_machine_configuration_assignment_example =
        azurerm.policy_virtual_machine_configuration_assignment.PolicyVirtualMachineConfigurationAssignment(self, "example_5",
            configuration=PolicyVirtualMachineConfigurationAssignmentConfiguration(
                assignment_type="ApplyAndMonitor",
                parameter=[PolicyVirtualMachineConfigurationAssignmentConfigurationParameter(
                    name="Minimum Password Length;ExpectedValue",
                    value="16"
                ), PolicyVirtualMachineConfigurationAssignmentConfigurationParameter(
                    name="Minimum Password Age;ExpectedValue",
                    value="0"
                ), PolicyVirtualMachineConfigurationAssignmentConfigurationParameter(
                    name="Maximum Password Age;ExpectedValue",
                    value="30,45"
                ), PolicyVirtualMachineConfigurationAssignmentConfigurationParameter(
                    name="Enforce Password History;ExpectedValue",
                    value="10"
                ), PolicyVirtualMachineConfigurationAssignmentConfigurationParameter(
                    name="Password Must Meet Complexity Requirements;ExpectedValue",
                    value="1"
                )
                ],
                version="1.*"
            ),
            location=cdktf.Token.as_string(azurerm_windows_virtual_machine_example.location),
            name="AzureWindowsBaseline",
            virtual_machine_id=cdktf.Token.as_string(azurerm_windows_virtual_machine_example.id)
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        azurerm_policy_virtual_machine_configuration_assignment_example.override_logical_id("example")
        azurerm_virtual_machine_extension_example =
        azurerm.virtual_machine_extension.VirtualMachineExtension(self, "example_6",
            auto_upgrade_minor_version=cdktf.Token.as_boolean("true"),
            name="AzurePolicyforWindows",
            publisher="Microsoft.GuestConfiguration",
            type="ConfigurationforWindows",
            type_handler_version="1.29",
            virtual_machine_id=cdktf.Token.as_string(azurerm_windows_virtual_machine_example.id)
        )
        # This allows the Terraform resource name to match the original name. You can remove the call if you don't need them to match.
        azurerm_virtual_machine_extension_example.override_logical_id("example")
```

## Arguments Reference

The following arguments are supported:

* ``name`- (Required) The name of the Guest Configuration that will be assigned in this Guest Configuration Assignment. Changing this forces a new resource to be created.

* ``location`- (Required) The Azure location where the Policy Virtual Machine Configuration Assignment should exist. Changing this forces a new resource to be created.

* ``virtual_machine_id`- (Required) The resource ID of the Policy Virtual Machine which this Guest Configuration Assignment should apply to. Changing this forces a new resource to be created.

* ``configuration`- (Required) A ``configuration`block as defined below.

---

A ``configuration`block supports the following:

* ``assignment_type`- (Optional) The assignment type for the Guest Configuration Assignment. Possible values are ``Audit` ``ApplyAndAutoCorrect` ``ApplyAndMonitor`and ``DeployAndAutoCorrect`

* ``content_hash`- (Optional) The content hash for the Guest Configuration package.

* ``content_uri`- (Optional) The content URI where the Guest Configuration package is stored.

~> **NOTE:** When deploying a Custom Guest Configuration package the ``content_hash`and ``content_uri`fields must be defined. For Built-in Guest Configuration packages, such as the ``AzureWindowsBaseline`package, the ``content_hash`and ``content_uri`should not be defined, rather these fields will be returned after the Built-in Guest Configuration package has been provisioned. For more information on guest configuration assignments please see the [product documentation](https://docs.microsoft.com/azure/governance/policy/concepts/guest-configuration-assignments).

* ``parameter`- (Optional) One or more ``parameter`blocks as defined below which define what configuration parameters and values against.

* ``version`- (Optional) The version of the Guest Configuration that will be assigned in this Guest Configuration Assignment.

---

A ``parameter`block supports the following:

* ``name`- (Required) The name of the configuration parameter to check.

* ``value`- (Required) The value to check the configuration parameter with.

## Attributes Reference

In addition to the Arguments listed above - the following Attributes are exported:

* ``id`- The ID of the Policy Virtual Machine Configuration Assignment.

## Timeouts

The ``timeouts`block allows you to specify [timeouts](https://www.terraform.io/language/resources/syntax#operation-timeouts) for certain actions:

* ``create`- (Defaults to 30 minutes) Used when creating the Policy Virtual Machine Configuration Assignment.
* ``update`- (Defaults to 30 minutes) Used when updating the Policy Virtual Machine Configuration Assignment.
* ``read`- (Defaults to 5 minutes) Used when retrieving the Policy Virtual Machine Configuration Assignment.
* ``delete`- (Defaults to 30 minutes) Used when deleting the Policy Virtual Machine Configuration Assignment.

## Import

Policy Virtual Machine Configuration Assignments can be imported using the ``resource id` e.g.

```shell
terraform import azurerm_policy_virtual_machine_configuration_assignment.example /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/group1/providers/Microsoft.Compute/virtualMachines/vm1/providers/Microsoft.GuestConfiguration/guestConfigurationAssignments/assignment1
```

<!-- cache-key: cdktf-0.17.0-pre.15 input-317dc300961f4807840360737c78595eea36a842c9055c630713c5bb73b26c73 -->